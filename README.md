# Benchmarking For Speculative Decoding on vLLM V1

The benchmarking scripts (SLURM files) are generated programmatically using the `create_slurm_files.py` script.
They are created in the `generated-lrz/` directory.
LRZ is the cluster I run the benchmarks on.

Command:

```bash
python create_slurm_files.py
```

The Python script programmatically fills two template files:

- `throughput-sd-template.slurm` for throughput benchmarking **with** speculative decoding
- `throughput-nosd-template.slurm` for throughput benchmarking **without** speculative decoding

If you want to run the SLURM files in your own cluster, you will need modify the template files.
An example are the templates in `slurm-kisski/` directory, which are generated by the same script to the directory `generated-kisski/`.
KISSKI is another cluster I run the benchmarks on.

## Data and Plots

All plots were generated by the `visualize.ipynb` notebook.
They are dumped in the `imgs/` directory. 
Change the `dataset` variable to plot the results for a different dataset.
The raw benchmark logs are in the directory `logs-2026-01-23/`.
The parsed benchmark data is in the file `data-2026-01-23.parquet`.
If I were to do this all again, I would use the `--save-result` flag of `vllm bench serve` rather than parsing the logs manually.